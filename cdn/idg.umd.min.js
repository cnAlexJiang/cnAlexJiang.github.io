(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vuex"),require("lodash"),require("vue-router"),require("qs"),require("vue-i18n"),require("vue"),require("localforage"),require("axios")):"function"===typeof define&&define.amd?define(["vuex","lodash","vue-router","qs","vue-i18n",,"localforage","axios"],t):"object"===typeof exports?exports["Idg"]=t(require("vuex"),require("lodash"),require("vue-router"),require("qs"),require("vue-i18n"),require("vue"),require("localforage"),require("axios")):e["Idg"]=t(e["Vuex"],e["_"],e["VueRouter"],e["Qs"],e["VueI18n"],e["Vue"],e["localforage"],e["axios"])})("undefined"!==typeof self?self:this,function(e,t,n,r,o,i,a,u){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fae3")}({5880:function(t,n){t.exports=e},"60bb":function(e,n){e.exports=t},6389:function(e,t){e.exports=n},"796d":function(e,t){e.exports=r},"85b3":function(e,t){e.exports=o},"8bbf":function(e,t){e.exports=i},bd1d:function(e,t,n){var r;(function(){"use strict";
/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */function o(e,t){var n;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,this.tapTimeout=t.tapTimeout||700,!o.notNeeded(e)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=this,u=0,c=r.length;u<c;u++)i[r[u]]=s(i[r[u]],i);a&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var o=Node.prototype.removeEventListener;"click"===t?o.call(e,t,n.hijacked||n,r):o.call(e,t,n,r)},e.addEventListener=function(t,n,r){var o=Node.prototype.addEventListener;"click"===t?o.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):o.call(e,t,n,r)}),"function"===typeof e.onclick&&(n=e.onclick,e.addEventListener("click",function(e){n(e)},!1),e.onclick=null)}function s(e,t){return function(){return e.apply(t,arguments)}}}var i=navigator.userAgent.indexOf("Windows Phone")>=0,a=navigator.userAgent.indexOf("Android")>0&&!i,u=/iP(ad|hone|od)/.test(navigator.userAgent)&&!i,c=u&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=u&&/OS [6-7]_\d/.test(navigator.userAgent),l=navigator.userAgent.indexOf("BB10")>0;o.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(u&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},o.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},o.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},o.prototype.determineEventType=function(e){return a&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},o.prototype.focus=function(e){var t;u&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},o.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},o.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},o.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],u){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},o.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},o.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},o.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},o.prototype.onTouchEnd=function(e){var t,n,r,o,i,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(i=e.changedTouches[0],l=document.elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=l.tagName.toLowerCase(),"label"===r){if(t=this.findControl(l),t){if(this.focus(l),a)return!1;l=t}}else if(this.needsFocus(l))return e.timeStamp-n>100||u&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,e),u&&"select"===r||(this.targetElement=null,e.preventDefault()),!1);return!(!u||c||(o=l.fastClickScrollParent,!o||o.fastClickLastScrollTop===o.scrollTop))||(this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1)},o.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},o.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},o.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},o.prototype.destroy=function(){var e=this.layer;a&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},o.notNeeded=function(e){var t,n,r,o;if("undefined"===typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],n){if(!a)return!0;if(t=document.querySelector("meta[name=viewport]"),t){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(l&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]"),t))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},o.attach=function(e,t){return new o(e,t)},r=function(){return o}.call(t,n,t,e),void 0===r||(e.exports=r)})()},c223:function(e,t){e.exports=a},cebe:function(e,t){e.exports=u},f6fd:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(r){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)},fae3:function(e,t,n){"use strict";var r;(n.r(t),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=r[1]));var o=n("8bbf"),i=n.n(o),a=n("85b3"),u=n.n(a);i.a.use(u.a),i.a.prototype.$l=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=i.a.prototype.$t).call.apply(t,[this,"".concat(this.$idg.appid,".").concat(this.$package.name,".").concat(e)].concat(r))};var c=new u.a;function s(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return c.t.apply(c,["".concat(e.idg.appid,".").concat(e.package.name,".").concat(t)].concat(r))}function l(){return c.locale}function f(e){c.locale=e}f("zh-CN");var p={getLanguage:l,setLanguage:f},h=p,d=n("cebe"),y=n.n(d),g=n("796d"),v=n.n(g);function m(e){return m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!S(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return j(e,arguments,R(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),P(n,e)},E(e)}function C(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function j(e,t,n){return j=C()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&P(i,n.prototype),i},j.apply(null,arguments)}function S(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var T=function(e){function t(e,n){var r;return b(this,t),r=k(this,R(t).call(this,n)),r.code=e,r.message=n,r}return w(t,e),t}(E(Error)),I=T;function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var D=function(){function e(){_(this,e),this.showDebug=!0}return N(e,[{key:"debug",value:function(e){var t;if(this.showDebug){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,["[DEBUG]",e].concat(r))}}},{key:"info",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,["[INFO]",e].concat(r))}},{key:"error",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).error.apply(t,["[ERROR]",e].concat(r))}},{key:"warn",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).warn.apply(t,["[WARN]",e].concat(r))}}]),e}(),A=new D;A.showDebug=location.href.indexOf("idg-debug=1")>=0;var L=A;function q(e){return q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function M(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach(function(t){U(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}var $,Y="network/Api",G=401,W=403,J=404,X=503,V=1e3,K=1001;(function(e){e["FORM_URLENCODED"]="application/x-www-form-urlencoded",e["MULTIPART_FORM_DATA"]="multipart/form-data",e["APPLICATION_JSON"]="application/json"})($||($={}));var Q=function(){function e(t){var n=this;F(this,e),this.contentType=$.FORM_URLENCODED,this.enableCache=!0,this.retryCount=0;var r=this.idg;this.options=e.generateOptions(r,t);var o=this.options,i=o.baseURL,a=o.timeout;this.agent=y.a.create({baseURL:i,timeout:a}),this.agent.interceptors.request.use(function(e){var t=n.requestHandler(e);return n.enableCache&&(t.id=t.params.IDG_CACHE_ID,delete t.params.IDG_CACHE_ID),n.retryCount&&(t.retry=t.params.IDG_RETRY_COUNT,delete t.params.IDG_RETRY_COUNT),t},function(e){n.removeCache(e),n.errorHandler(e)}),this.agent.interceptors.response.use(function(e){return n.removeCache(e),n.responseHandler(e)},function(e){n.removeCache(e);var t=n.retry(e);return t||n.errorHandler(e)})}return z(e,[{key:"request",value:function(e){return this._request(e)}},{key:"getIdgHeaders",value:function(){var e={RequestStack:JSON.stringify(this.idg.getRequestStack())},t=this.idg.root.getToken();return t&&(e.Authorization=t),e}},{key:"errorHandler",value:function(e){if(e.response){if(403===e.response.status)return this.idg.root.redirectLogin(),Promise.reject(new I(W,"403 NO ACCESS"));if(401===e.response.status)return this.idg.root.redirectLogin(),Promise.reject(new I(G,"401 Unauthorized"));if(404===e.response.status)return Promise.reject(new I(J,"404 Not Found"));if(503===e.response.status)return Promise.reject(new I(J,"Service Unavaliable"))}return Promise.reject(new I(V,"network error"))}},{key:"requestHandler",value:function(t){var n=this.getIdgHeaders();return t.headers=Object.assign(t.headers,n),t.params||(t.params={}),t.headers["Content-Type"]=t.headers["Content-Type"]||this.contentType,t.data=e.generateData(t.data,t.headers["Content-Type"]),t}},{key:"responseHandler",value:function(e){if(!e.data)return Promise.reject(new I(K,"no data"));var t=e.data;return t.hasOwnProperty("state")||t.hasOwnProperty("ret")?1!==t.state?Promise.reject(new I(t.state,t.msg)):t.data:Promise.reject(new I(K,"error response format, should like {state: xx, data: xx}"))}},{key:"removeCache",value:function(t){if(this.enableCache){var n=t.config,r=e.cacheRequests.findIndex(function(e){return e.id===n.id});r>=0?e.cacheRequests.splice(r,1):L.warn(Y,"api response not cached")}}},{key:"retry",value:function(e){if(this.retryCount){var t=e.config;if(t.params||(t.params={}),t.params.IDG_RETRY_COUNT=t.retry||0,t.params.IDG_RETRY_COUNT!==this.retryCount)return t.params.IDG_RETRY_COUNT=t.params.IDG_RETRY_COUNT+1,t.url=t.url.replace(t.baseURL,""),t.data&&(t.data=v.a.parse(t.data)),this.agent(e.config)}}},{key:"_request",value:function(t){var n=this,r=this.getIdgHeaders(),o=t.method,i=t.url,a=t.data;if(!this.enableCache)return this.agent.request(t);var u=e.cacheRequests.find(function(e){return n.equealRequest(B({},t,{headers:r}),e)});if(u)return u.promise;var c=++e.id;t.params||(t.params={}),t.params.IDG_CACHE_ID=c;var s=this.agent.request(t);return e.cacheRequests.push({id:c,requestConfig:{headers:r,data:a,url:i,method:o},promise:s}),s}},{key:"equealRequest",value:function(e,t){var n=e.headers,r=e.data,o=JSON.stringify(n)===JSON.stringify(t.requestConfig.headers),i=v.a.stringify(r)===v.a.stringify(t.requestConfig.data),a=e.method===t.requestConfig.method,u=e.url===t.requestConfig.url;return o&&i&&a&&u}}],[{key:"generateOptions",value:function(t,n){var r=Object.assign(e.DEFAULT_OPTIONS,{baseURL:t.root.getBaseURL(t)},n);return r}},{key:"generateData",value:function(t,n){if(n===$.FORM_URLENCODED)return v.a.stringify(t);if(n===$.MULTIPART_FORM_DATA){var r=new FormData;return e.makeFormData(t,r),r}return n===$.APPLICATION_JSON?JSON.stringify(t):void 0}},{key:"makeFormData",value:function(t,n){var r=[];if(t instanceof File)r.push({key:"",value:t});else if(t instanceof Array)for(var o=0,i=t.length;o<i;o++)for(var a=e.makeFormData(t[o]),u=0,c=a.length;u<c;u++){var s=n?o+a[u].key:"["+o+"]"+a[u].key;r.push({key:s,value:a[u].value})}else"object"===q(t)?Object.keys(t).forEach(function(o){for(var i=e.makeFormData(t[o]),a=0,u=i.length;a<u;a++){var c=n?o+i[a].key:"["+o+"]"+i[a].key;r.push({key:c,value:i[a].value})}}):r.push({key:"",value:t});if(!n)return r;for(var l=0,f=r.length;l<f;l++)n.append(r[l].key,r[l].value)}}]),e}();Q.id=0,Q.cacheRequests=[],Q.DEFAULT_OPTIONS={timeout:5e3};var Z=Q,ee=n("c223"),te=n.n(ee);function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),e}var ie=function(){function e(t){ne(this,e),this.id=t.appid,this.storage=te.a.createInstance({name:this.id})}return oe(e,[{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}},{key:"destroy",value:function(){te.a.dropInstance({name:this.id})}}]),e}(),ae=ie,ue=n("5880"),ce=n.n(ue);function se(e){return se="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){return!t||"object"!==se(t)&&"function"!==typeof t?pe(e):t}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}function de(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ye(e,t)}i.a.use(ce.a);var ge=function(e){function t(e,n,r){var o;return le(this,t),o=fe(this,he(t).call(this,e)),o.package=n,o.idg=r,o}return de(t,e),t}(ue["Store"]),ve=ge;function me(e){return me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){return!t||"object"!==me(t)&&"function"!==typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Ee(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}function Ce(e,t){return Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ce(e,t)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t,n){return t&&Se(e.prototype,t),n&&Se(e,n),e}var Re="package/Idg",Te=[],Ie=0;function _e(){return Ie+=1,Ie}var xe=function(){function e(t,n,r,o){je(this,e),this.packageInstances=[],this.appid=t,this.channelOptions=n,this.packages=r,this.children=o,this.routes=[],this.components={},this.pages={},this.apis={},this.stores={},this.options={},this.controllers={},this.pool={},this.sid=_e()}return Pe(e,[{key:"init",value:function(){}},{key:"getChannelOptions",value:function(){return this.channelOptions&&"function"===typeof this.channelOptions.getChannelOptions?this.channelOptions.getChannelOptions(this):this.channelOptions}},{key:"register",value:function(){var e=this;this.packages&&(L.debug(Re,"register",this.appid,this),this.packages.forEach(function(t){L.debug(Re,"register pkg",t.name,t),e.registerOptions(t);var n=e.registerStores(t);e.registerApis(t),e.registerControllers(t),e.registerComponents(t),e.registerPages(t),e.registerLocales(t),e.registerRoutes(t);var r={idg:e,$l:function(e){return s(this,e)},$store:n,package:t};if(t.routerBeforeEach){var o=t.routerBeforeEach;e.root.router.beforeEach(function(e,t,n){o(r,e,t,n)})}if(t.routerAfterEach){var i=t.routerAfterEach;e.root.router.afterEach(function(e,t){i(r,e,t)})}t.registered&&(t.registered(r),e.packageInstances.push(r))})),this.children&&this.children.forEach(function(e){e.register()})}},{key:"inject",value:function(){this.children&&this.children.forEach(function(e){e.inject()}),this.injectControllers(),this.injectComponents(),this.injectPages()}},{key:"injectRoutes",value:function(){this.addRoutes(),this.children&&this.children.forEach(function(e){e.injectRoutes()})}},{key:"setParent",value:function(e){this.parent=e}},{key:"setRoot",value:function(e){this.root=e}},{key:"callService",value:function(e){var t=Z.generateOptions(this);t.baseURL&&(e.baseURL=t.baseURL),e.params||(e.params={});var n={RequestStack:JSON.stringify([].concat(this.getRequestStack(),e.requestStack))},r=this.root.getToken();return r&&(n.Authorization=r),e.headers=n,e.headers["Content-Type"]=e.headers["Content-Type"]||$.FORM_URLENCODED,e.data=Z.generateData(e.data,e.headers["Content-Type"]),y.a.request(e)}},{key:"findPackageInstance",value:function(e){return this.packageInstances.find(function(t){return t.package.name===e})}},{key:"findChildByAppid",value:function(e){if(this.children){var t=this.children.filter(function(t){return t.appid===e});if(0!==t.length)return t[0]}}},{key:"findChildByChannelOption",value:function(e,t){if(this.children){var n=this.children.filter(function(n){return n.appid===e&&JSON.stringify(n.channelOptions)===JSON.stringify(t)});if(0!==n.length)return n[0]}}},{key:"addChild",value:function(e){var t=this.findChildByChannelOption(e.appid,e.channelOptions);return t||(this.children||(this.children=[]),this.children.push(e),this.init(),this.register(),this.inject(),this.injectRoutes(),e)}},{key:"getPage",value:function(e){return this.getById(e,"pages")}},{key:"getComponent",value:function(e){return this.getById(e,"components")}},{key:"getApi",value:function(e){return this.getById(e,"apis")}},{key:"getRequestStack",value:function(){var e=[],t=this;while(t){var n=t.getChannelOptions();n?(n.channelAlias?e.unshift({appid:t.appid,channelAlias:t.getChannelOptions().channelAlias}):e.unshift({appid:t.appid,appkey:t.getChannelOptions().appkey,channel:t.getChannelOptions().channel}),t=t.parent):L.warn(Re,"getRequestStack no channelOptions",n,t)}return e}},{key:"getById",value:function(e,t){var n=e.split("."),r=n[0];L.debug(Re,"getById",e,t,this);var o=this.findChildByAppid(r);if(n.length>3){var i=r===(this.parent&&this.parent.appid)?this.parent:o;if(!i||!i[t])return;return n.shift(),L.debug(Re,"getById finded",i),i.getById(n.join("."),t)}if(r===this.appid){if(!this[t])return;return L.debug(Re,"getById0",this[t][e]),this[t][e]}if(this.parent&&r===this.parent.appid){if(!this.parent||!this.parent[t])return;return L.debug(Re,"getById1",this.parent),this.parent[t][e]}if(o&&o[t])return L.debug(Re,"getById2",o),o[t][e]}},{key:"generateId",value:function(e,t,n){var r=e.split(".");return 1===r.length&&r.unshift(t.name),2===r.length&&r.unshift(n.appid),r.join(".")}},{key:"filterDepends",value:function(e,t){var n=this;return e.filter(function(e){var n="";return n="string"===typeof e?e:e.id,n.startsWith(t+".")}).map(function(e){var r="",o="";return"string"===typeof e?(r=e,o=n.getDefaultVariableName(r,t)):(r=e.id,o=e.variableName),{id:r.slice(t.length+1),variableName:o}})}},{key:"addRoutes",value:function(){var e=this.addRoute(this.routes);this.root.router.addRoutes(e)}},{key:"addRoute",value:function(e){var t=this;return e.filter(function(e){return!Te.includes(e.name)}).map(function(e){var n=e.package;Te.push(e.name);var r={path:e.path,name:e.name,redirect:e.redirect,meta:e.meta};if(e.page){var o=t.generateId(e.page,n,t),i=t.getPage(o),a=t;i?(r.component=i,L.debug("Idg injectRoute","".concat(e.name," injectRoute page ").concat(o))):L.warn("Idg injectRoute","page ".concat(o," not registered while ").concat(e.name," injectRoute"),a)}return e.children&&(r.children=t.addRoute(e.children)),r})}},{key:"injectControllers",value:function(){var e=this;Object.keys(this.controllers).forEach(function(t){e.injectController(e.controllers[t])})}},{key:"injectController",value:function(e){this.injectcControllerApi(e)}},{key:"injectComponents",value:function(){var e=this;Object.keys(this.components).forEach(function(t){e.injectcComponentApi(e.components[t])}),Object.keys(this.components).forEach(function(t){e.injectcComponentController(e.components[t])}),Object.keys(this.components).forEach(function(t){e.injectComponent(e.components[t])})}},{key:"injectPages",value:function(){var e=this;Object.keys(this.pages).forEach(function(t){e.injectPage(e.pages[t])})}},{key:"injectcComponentController",value:function(e){if(e.options&&e.options.depends){var t=this.filterDepends(e.options.depends,"controller");this.injectcController(e,t)}}},{key:"injectcController",value:function(e,t){this.injectDepends(e,t,"controllers")}},{key:"injectcComponentApi",value:function(e){if(e.options&&e.options.depends){var t=this.filterDepends(e.options.depends,"api");this.injectApi(e,t)}}},{key:"injectcControllerApi",value:function(e){if(e.depends){var t=this.filterDepends(e.depends,"api");this.injectApi(e,t)}}},{key:"injectApi",value:function(e,t){this.injectDepends(e,t,"apis")}},{key:"injectDepends",value:function(e,t,n){var r=this,o=e.prototype.$package,i={},a=this;o?(t.forEach(function(e){var t=r.generateId(e.id,o,r),u=e.variableName,c=r.getById(t,n);if(!c)throw L.debug(Re,"current idg",a),r.getById(t,n),new Error("".concat(t," not registered, please register first"));r.pool[t]||(r.pool[t]=new c),i[u]=r.pool[t]}),Object.keys(i).forEach(function(t){e.prototype[t]=i[t],r.injects||(r.injects=[]);var n=i[t];r.injects.push({key:t,value:n&&n.sid?n.sid:t}),L.debug("Idg","".concat(e.ctorName," injectDepend ").concat(t))})):L.warn(Re,"injectDepends: pkg not found",e.ctorName,e,t,n,a)}},{key:"injectComponent",value:function(e){return this.injectComponentOrPage(e,"components")}},{key:"injectPage",value:function(e){return this.injectComponentOrPage(e,"pages")}},{key:"injectComponentOrPage",value:function(e,t){var n=this;if(!0===e.injected||!e.options||!e.options.depends)return e;var r=this.filterDepends(e.options.depends,"component"),o={},i=e.package,a=this;r.forEach(function(e){var t=e.id.split("."),u=t[t.length-1],c=n.generateId(e.id,i,n),s=n.getComponent(c);s?(o[e.variableName]=n.injectComponent(s),L.debug("Idg","injectComponent ".concat(u),r)):L.warn("Idg","injectComponent depend component not found",c,a)});var u={components:o},c=e.extend(u);if(c.injected=!0,!e.ctorName)throw L.debug(Re,"current idg",this),new Error("no ctorName found in Ctor");var s=this.generateId(e.ctorName,e.package,this);return this[t][s]=c,c}},{key:"getDefaultVariableName",value:function(e,t){var n=e.split("."),r=n.length>1?n[n.length-1]:e;if("component"===t)return r;var o=r.split("");return o.length>0&&(o[0]=o[0].toLowerCase()),o.join("")}},{key:"registerApis",value:function(e){var t=this;if(e.apis){var n=e.apis;Object.keys(n).forEach(function(r){var o=t.generateId(r,e,t);t.apis[o]=t.decorateApi(r,n[r])})}}},{key:"registerControllers",value:function(e){var t=this;if(e.controllers){var n=e.controllers;Object.keys(n).forEach(function(r){var o=t.generateId(r,e,t);t.controllers[o]=t.decorateController(r,n[r],e)})}}},{key:"decorateApi",value:function(e,t){var n=function(e){function t(){return je(this,t),ke(this,we(t).apply(this,arguments))}return Ee(t,e),t}(t);return n.prototype.sid=_e(),n.prototype.idg=this,n}},{key:"decorateController",value:function(e,t,n){var r=function(e){function t(){return je(this,t),ke(this,we(t).apply(this,arguments))}return Ee(t,e),t}(t);return r.prototype.idg=this,r.prototype.sid=_e(),r.prototype.decorated=!0,r.prototype.ctorName=e,r.prototype.$package=n,r.prototype.store=this.stores[this.generateId("store",n,this)],r}},{key:"registerComponents",value:function(e){L.debug(Re,"registerComponents",e),this.registerComponentsOrPages(e,"components")}},{key:"registerPages",value:function(e){L.debug(Re,"registerPages",e),this.registerComponentsOrPages(e,"pages")}},{key:"registerComponentsOrPages",value:function(e,t){var n=this;if(e[t]){var r=e[t];Object.keys(r).forEach(function(o){var i=n.generateId(o,e,n),a=r[o],u=n.decorateComponent(o,a,e,t);n[t][i]=u})}}},{key:"decorateComponent",value:function(e,t,n,r){L.debug(Re,"decorateComponent",e,r,n);var o=t;if(o.decorated)return o;var a=i.a.extend(o),u=this.stores[this.generateId("store",n,this)];u&&(a=a.extend({store:u}));var c=this.options[this.generateId("options",n,this)];c&&(a=a.extend(c));var s=this.extendComponet(a);return s.prototype.$app=this.root,s.prototype.$idg=this,s.prototype.$package=n,s.prototype.getComponent=function(e){var t=e.split(".");if(t.length>3)return this.logger.warn("Idg decorateComponent","invalid depend component",e),null;var n=this.$idg,r=this.$package;return 1===t.length&&t.unshift(r.name),2===t.length&&t.unshift(n.appid),n.getComponent(t.join("."))},s.prototype.$componentType=r.slice(0,r.length-1),s.decorated=!0,s.idg=this,s.package=n,s.ctorName=e,s}},{key:"extendComponet",value:function(e){return function(e){function t(){return je(this,t),ke(this,we(t).apply(this,arguments))}return Ee(t,e),t}(e)}},{key:"registerLocales",value:function(e){var t=this;if(e.locales){var n=e.locales;Object.keys(n).forEach(function(r){t.root.i18n.mergeLocaleMessage(r,be({},t.appid,be({},e.name,n[r])))})}}},{key:"registerStores",value:function(e){var t=e.store||{},n=this.generateId("store",e,this),r=new ve(t,e,this);return this.stores[n]=r,r}},{key:"registerOptions",value:function(e){if(e.options){var t=this.generateId("options",e,this);this.options[t]=e.options}}},{key:"registerRoutes",value:function(e){var t=this;e.routes&&this._registerRoutes(e.routes,e).forEach(function(e){t.routes.push(e)})}},{key:"_registerRoutes",value:function(e,t){var n=this;return e.map(function(e){return e.package=t,e.children&&(e.children=n._registerRoutes(e.children,t)),e})}},{key:"storage",get:function(){return this.pStorage||(this.pStorage=new ae(this)),this.pStorage}}]),e}(),Ne=xe;function De(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ae(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){De(i,r,o,a,u,"next",e)}function u(e){De(i,r,o,a,u,"throw",e)}a(void 0)})}}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&qe(e.prototype,t),n&&qe(e,n),e}var Be="token",Ue="accountId",Fe="name",He="bindInfo",ze=function(){function e(t){Le(this,e),this.app=t}return Me(e,[{key:"getToken",value:function(){return this.token}},{key:"getAccountId",value:function(){return this.accountId}},{key:"getName",value:function(){return this.name}},{key:"getBindInfo",value:function(){return this.bindInfo}},{key:"setToken",value:function(){var e=Ae(function*(e){yield this.app.storage.setItem(Be,e),this.token=e});function t(t){return e.apply(this,arguments)}return t}()},{key:"setName",value:function(){var e=Ae(function*(e){yield this.app.storage.setItem(Fe,e),this.name=e});function t(t){return e.apply(this,arguments)}return t}()},{key:"setAccountId",value:function(){var e=Ae(function*(e){yield this.app.storage.setItem(Ue,e),this.accountId=e});function t(t){return e.apply(this,arguments)}return t}()},{key:"setBindInfo",value:function(){var e=Ae(function*(e){yield this.app.storage.setItem(He,e),this.bindInfo=e});function t(t){return e.apply(this,arguments)}return t}()},{key:"initByStorage",value:function(){var e=Ae(function*(){this.token=yield this.app.storage.getItem(Be),this.name=yield this.app.storage.getItem(Fe),this.accountId=yield this.app.storage.getItem(Ue),this.bindInfo=yield this.app.storage.getItem(He)});function t(){return e.apply(this,arguments)}return t}()},{key:"clear",value:function(){var e=Ae(function*(){yield this.app.storage.removeItem(Be),yield this.app.storage.removeItem(Fe),yield this.app.storage.removeItem(Ue),yield this.app.storage.removeItem(He),this.accountId=void 0,this.bindInfo=void 0,this.name=void 0,this.token=void 0});function t(){return e.apply(this,arguments)}return t}()}]),e}(),$e=ze;function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t,n){return t&&Ge(e.prototype,t),n&&Ge(e,n),e}var Je=function(){function e(){Ye(this,e),this.cbs={}}return We(e,[{key:"listen",value:function(e,t){e&&t&&(this.cbs[e]||(this.cbs[e]=[]),this.cbs[e].push(t))}},{key:"remove",value:function(e,t){if(this.cbs[e])if(t){var n=this.cbs[e].findIndex(function(e){return e===t});n>=0&&this.cbs[e].splice(n,1)}else delete this.cbs[e]}},{key:"trigger",value:function(e){var t=this.cbs[e];if(t&&0!==t.length){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)t[i].apply(this,r)}}}]),e}(),Xe=Je,Ve=n("6389"),Ke=n.n(Ve);function Qe(e,t,n,r,o,i,a){try{var u=e[i](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function Ze(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){Qe(i,r,o,a,u,"next",e)}function u(e){Qe(i,r,o,a,u,"throw",e)}a(void 0)})}}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}i.a.use(Ke.a);var rt="router/Router",ot=function(){function e(t){et(this,e),this.idg=t,this.router=new Ke.a,this.initHooks()}return nt(e,[{key:"initHooks",value:function(){var e=this;this.router.beforeEach(function(){var t=Ze(function*(t,n,r){L.debug(rt,"router beforeEach start");try{yield e.idg.root.auth.initByStorage()}catch(o){L.debug(rt,"router beforeEach error",o)}L.debug(rt,"router beforeEach start"),r()});return function(e,n,r){return t.apply(this,arguments)}}())}}]),e}(),it=ot,at="screen/registered",ut=!1,ct=[{size:"xs",value:480},{size:"sm",value:576},{size:"md",value:768},{size:"lg",value:992},{size:"xl",value:1200},{size:"xxl",value:1600}];function st(e){L.debug(at,"resize start",e);var t=document.documentElement,n=t.clientWidth,r=ct[0].value;t.style.fontSize=n<r?n/375*16+"px":"16px";var o=ct.find(function(e,t){return t===ct.length-1&&n>=e.value||n>=e.value&&n<ct[t+1].value}),i=o?o.size:"xxs";L.debug(at,"resize size",i),e.$store.commit("resize",i),L.debug(at,"rootWidth:".concat(n,", rootStyle").concat(t.style.fontSize))}function lt(e){ut||(st(e),window.addEventListener("resize",function(){st(e)},!1),window.addEventListener("orientationchange",function(){st(e)},!1),ut=!0)}var ft="screen/store",pt={state:{screen:{size:void 0},global:{}},mutations:{resize:function(e,t){L.debug(ft,"resize",e,t),e.screen.size=t},setGlobal:function(e,t){var n=t.key,r=t.val;L.debug(ft,"setGlobal",e,{key:n,val:r}),i.a.set(e.global,n,r)}}},ht=pt,dt={name:"idg-global",registered:lt,store:ht},yt=dt,gt=n("bd1d"),vt=n.n(gt),mt=!1;!mt&&"addEventListener"in document&&(document.addEventListener("DOMContentLoaded",function(){vt.a.attach(document.body)},!1),mt=!0);var bt=n("60bb"),kt=n.n(bt),Ot=new D;Ot.showDebug=location.href.indexOf("debug=1")>=0;var wt=Ot;function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t,n){return t&&Ct(e.prototype,t),n&&Ct(e,n),e}var St="notify/Notify",Pt=function(){function e(){Et(this,e),this.permission=""}return jt(e,[{key:"send",value:function(e){this.grant(function(){var t=new Notification(e.title);t.onclick=function(e){wt.debug(St,"notification onclick",e),window.focus()}})}},{key:"grant",value:function(e){var t=this;if(this.permission)"granted"===this.permission&&e&&e();else{if("Notification"in window)return"granted"===Notification.permission?(this.permission="granted",void(e&&e())):void Notification.requestPermission(function(n){t.permission="default"===n?"":n,"granted"===n&&e&&e()});wt.debug(St,"Notification","This browser does not support desktop notification")}}}]),e}();function Rt(e){return Rt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(e)}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function It(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _t(e,t,n){return t&&It(e.prototype,t),n&&It(e,n),e}function xt(e,t){return!t||"object"!==Rt(t)&&"function"!==typeof t?Nt(e):t}function Nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e,t,n){return Dt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=At(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},Dt(e,t,n||e)}function At(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=Lt(e),null===e)break;return e}function Lt(e){return Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lt(e)}function qt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}function Mt(e,t){return Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mt(e,t)}function Bt(e){return Ht(e)||Ft(e)||Ut()}function Ut(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Ft(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Ht(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var zt=window.ci_envs||window.IDG_ENVS;i.a.config.optionMergeStrategies.depends=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[].concat(Bt(t),Bt(e));return kt.a.uniqBy(n,function(e){if("string"===typeof e){var t=e.split(".");return t[t.length-1]}return e.variableName})};var $t=function(e){function t(e){var n;Tt(this,t);var r=e.appid,o=e.packages,i=e.children,a=zt.appkey,u=zt.channel,s={appkey:a,channel:u};return n=xt(this,Lt(t).call(this,r,s,[].concat(Bt(o||[]),[yt]),i)),n.notify=new Pt,n.root=Nt(n),n.appkey=a,n.channel=u,n.auth=new $e(Nt(n)),n.routerManager=new it(Nt(n)),n.router=n.routerManager.router,n.dispatcher=new Xe,n.i18n=c,n.serverHost=zt.host,n}return qt(t,e),_t(t,[{key:"setState",value:function(e,t){var n=this.findPackageInstance("idg-global"),r=n.$store;r.commit("setGlobal",{key:e,val:t})}},{key:"getState",value:function(e){var t=this.findPackageInstance("idg-global"),n=t.$store.state;return n.global[e]}},{key:"init",value:function(){var e=this;Dt(Lt(t.prototype),"init",this).call(this),this.children&&this.children.forEach(function(t){t.setParent(e),t.setRoot(e),t.init()})}},{key:"startup",value:function(){this.init(),this.register(),this.inject(),this.injectRoutes(),this.render()}},{key:"redirectLogin",value:function(){var e=window.location.search;e&&e.indexOf("?")>=0&&(e=e.slice(1));var t=e.split("&"),n=t.find(function(e){var t=e.split("=");return t&&t[0]&&"refer"===t[0]});n?(n=n.split("=")[1],window.location.href="".concat(decodeURIComponent(n),"#/login")):this.router.push("/login")}},{key:"setLocale",value:function(e){this.i18n.locale=e}},{key:"getLocale",value:function(){return this.i18n.locale}},{key:"getServerHost",value:function(){return this.serverHost}},{key:"setServerHost",value:function(e){this.serverHost=e}},{key:"getBaseURL",value:function(e){return window.USE_MOCK?"":e.appid===this.appid?this.getServerHost():this.getProxyURL()}},{key:"getProxyURL",value:function(){return this.getServerHost()+"/main.php/json/proxy/call?url="}},{key:"getToken",value:function(){return this.auth.getToken()}},{key:"render",value:function(){var e=this.router,t=this.i18n;return new i.a({i18n:t,router:e,render:function(e){return e("router-view")}}).$mount("#app")}},{key:"generateChannel",value:function(){return"".concat(this.appid,".").concat(this.appkey,".").concat(this.channel)}},{key:"graphJson",value:function(){return JSON.stringify(this.graph(this))}},{key:"graph",value:function(e){var t=this,n={appid:e.appid,channelOptions:e.getChannelOptions()};return e.children&&e.children.length>0&&(n.children=e.children.map(function(e){return t.graph(e)})),e.packages&&Object.keys(e.packages).length>0&&(n.packages=e.packages.map(function(n){return t.graphPackage(n,e)})),n}},{key:"graphPackage",value:function(e,t){var n=this,r={name:e.name},o=[];return e.components&&Object.keys(e.components).length>0&&(e.apis&&(r.apis=Object.keys(e.apis).map(function(e){return e})),Object.keys(e.components).forEach(function(r){var i,a=n.generateId(r,e,t);if(t.components[a]&&(i=t.components[a]),i&&i.options&&i.options.depends){var u=n.filterDepends(i.options.depends,"api");o=[].concat(Bt(o),Bt(u.map(function(r){return n.generateId(r.id,e,t)}).filter(function(e){return 3===e.split(".").length})))}})),o.length>0&&(r.depends=kt.a.uniq(o)),r}},{key:"screen",get:function(){var e=this.findPackageInstance("idg-global"),t=e.$store.state;return t.screen}}]),t}(Ne),Yt=$t;function Gt(e){return Gt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t,n){return t&&Jt(e.prototype,t),n&&Jt(e,n),e}function Vt(e,t){return!t||"object"!==Gt(t)&&"function"!==typeof t?Kt(e):t}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t,n){return Qt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Zt(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},Qt(e,t,n||e)}function Zt(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=en(e),null===e)break;return e}function en(e){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},en(e)}function tn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}function nn(e,t){return nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nn(e,t)}var rn=function(e){function t(e){Wt(this,t);var n=e.appid,r=e.channelOptions,o=e.packages,i=e.children;return Vt(this,en(t).call(this,n,r,o,i))}return tn(t,e),Xt(t,[{key:"init",value:function(){var e=this;Qt(en(t.prototype),"init",this).call(this),this.children&&this.children.forEach(function(t){t.setRoot(e.root),t.setParent(e),t.init()})}}]),t}(Ne),on=rn;function an(e){return an="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function un(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sn(e,t,n){return t&&cn(e.prototype,t),n&&cn(e,n),e}function ln(e,t){return!t||"object"!==an(t)&&"function"!==typeof t?fn(e):t}function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e,t,n){return pn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=hn(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},pn(e,t,n||e)}function hn(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=dn(e),null===e)break;return e}function dn(e){return dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dn(e)}function yn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}function gn(e,t){return gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gn(e,t)}var vn=function(e){function t(e){var n;return un(this,t),n=ln(this,dn(t).call(this,e)),n.idempotentToken=n.gennerateToken(),n}return yn(t,e),sn(t,[{key:"request",value:function(e){return e.refresh&&(this.idempotentToken=this.gennerateToken()),this.appendToken(e),pn(dn(t.prototype),"_request",this).call(this,e)}},{key:"appendToken",value:function(e){e.headers||(e.headers={}),e.headers.IdempotentToken=this.idempotentToken}},{key:"gennerateToken",value:function(){return(new Date).getMilliseconds()+""}}]),t}(Z),mn=vn;function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var kn=function e(){bn(this,e)};kn.depends=[];var On=kn;function wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,t,n){return t&&En(e.prototype,t),n&&En(e,n),e}var jn=function(){function e(){wn(this,e),this.menusO={}}return Cn(e,[{key:"registerMenu",value:function(e){this.menusO[e.name]||(this.menusO[e.name]=kt.a.cloneDeep(e))}},{key:"registerMenus",value:function(e){var t=this;e.forEach(function(e){t.registerMenu(e)})}},{key:"getMenus",value:function(){var e=[],t=kt.a.cloneDeep(this.menusO);return Object.keys(this.menusO).forEach(function(n){var r=t[n];if(r.parentName){var o=t[r.parentName];o.children||(o.children=[]),o.children.push(r)}else e.push(r)}),kt.a.sortBy(e,["order"])}}]),e}(),Sn=jn,Pn=new Sn,Rn=Pn;function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _n(e,t,n){return t&&In(e.prototype,t),n&&In(e,n),e}var xn=function(){function e(){Tn(this,e)}return _n(e,null,[{key:"import",value:function(t){var n=[];return t.forEach(function(t){n.push(new Promise(function(n,r){if(e.loadedResources[t.url])n(e.loadedResources[t.url]);else{var o=e.createElement(t);o.onload=function(e){n(e),o.onload=null},document.head.appendChild(o)}}))}),Promise.all(n)}},{key:"createElement",value:function(e){var t;return"script"===e.type?(t=document.createElement("script"),t.src=e.url,t.type="text/javascript"):(t=document.createElement("link"),t.type="text/css",t.rel="stylesheet",t.href=e.url),t}}]),e}();xn.loadedResources={},n.d(t,"App",function(){return Yt}),n.d(t,"Service",function(){return on}),n.d(t,"Idg",function(){return Ne}),n.d(t,"Api",function(){return Z}),n.d(t,"IdempotentApi",function(){return mn}),n.d(t,"NetworkError",function(){return I}),n.d(t,"Controller",function(){return On}),n.d(t,"Log",function(){return wt}),n.d(t,"Menus",function(){return Rn}),n.d(t,"Locales",function(){return h}),n.d(t,"Resource",function(){return xn}),n.d(t,"ERROR_RESPONSE_401",function(){return G}),n.d(t,"ERROR_RESPONSE_403",function(){return W}),n.d(t,"ERROR_RESPONSE_404",function(){return J}),n.d(t,"ERROR_RESPONSE_503",function(){return X}),n.d(t,"ERROR_NETWORK",function(){return V}),n.d(t,"ERROR_RESPONSE_FORMAT",function(){return K}),n.d(t,"ContentType",function(){return $})}})});
//# sourceMappingURL=main.umd.min.js.map